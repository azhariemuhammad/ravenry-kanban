(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,n){},165:function(e,t,n){},168:function(e,t,n){},170:function(e,t,n){},173:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"getCompanySuccess",function(){return $}),n.d(a,"getCompanyFailure",function(){return z}),n.d(a,"getCompany",function(){return H}),n.d(a,"createCompanyRequest",function(){return K}),n.d(a,"createCompanySuccess",function(){return Z}),n.d(a,"createCompanyFailure",function(){return ee}),n.d(a,"createCompany",function(){return te}),n.d(a,"removeCompanySuccess",function(){return ne}),n.d(a,"removeCompanyFailure",function(){return ae}),n.d(a,"removeCompanyRequest",function(){return re}),n.d(a,"removeCompany",function(){return oe});var r={};n.r(r),n.d(r,"getOfficeByCompanySuccess",function(){return ie}),n.d(r,"getOfficeFailure",function(){return le}),n.d(r,"getOfficeByCompany",function(){return ue}),n.d(r,"createOffice",function(){return se}),n.d(r,"createOfficeSuccess",function(){return me}),n.d(r,"createOfficeFailure",function(){return pe}),n.d(r,"removeOfficeSuccess",function(){return fe}),n.d(r,"removeOfficeFailure",function(){return de}),n.d(r,"removeOfficeRequest",function(){return he}),n.d(r,"removeOffice",function(){return ye});var o=n(1),c=n.n(o),i=n(32),l=n.n(i),u=(n(93),n(4)),s=n(5),m=n(9),p=n(7),f=n(8),d=n(28),h=n(176),y=n(177),v=n(178),E=n(10),b=n(81),C=n(87),O=n(19),g="CREATE_COMPANY_REQUEST",S="CREATE_COMPANY_FAILURE",N="CREATE_COMPANY_SUCCESS",k="GET_COMPANY_SUCCESS",j="GET_COMPANY_FAILURE",w="REMOVE_COMPANY_REQUEST",I="REMOVE_COMPANY_SUCCESS",_="CREATE_OFFICE_SUCCESS",P="CREATE_OFFICE_FAILURE",F="GET_OFFICE_BY_COMPANY_REQUEST",R="GET_OFFICE_BY_COMPANY_FAILURE",A="REMOVE_OFFICE_REQUEST",T="REMOVE_OFFICE_SUCCESS",D={companies:[]},L=function(e,t){switch(t.type){case g:return{id:e.length+1,name:t.name,address:t.address,revenue:t.revenue,phone:t.phone};default:return e}};var M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(O.a)({},e,{companies:t.payload.companies});case j:return void alert(t.error.error);case g:return Object(O.a)({},e,{companies:Object(C.a)(e.companies).concat([L(e.companies,t)])});case N:return window.confirm(t.payload),e;case S:return t.payload.error;case w:return Object(O.a)({},e,{companies:e.companies.filter(function(e){return e.id!==t.id})});case I:default:return e}},U={offices:[]};var Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(O.a)({},e,{offices:t.payload.offices});case R:return t.error.error;case _:return window.confirm(t.payload),e;case P:return alert(t.error),e;case A:return Object(O.a)({},e,{offices:e.offices.filter(function(e){return e.id!==t.id})});case T:default:return e}},x=Object(E.c)({company:M,office:Y}),V=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||E.d)(Object(E.a)(b.a)),q=Object(E.e)(x,V),B=(n(99),n(175)),G=n(82),Q=n.n(G),X=function(){function e(t){Object(u.a)(this,e),this.client=Q.a.create(t)}return Object(s.a)(e,[{key:"request",value:function(e){return this.client.request(e)}}]),e}(),J=function(){return{withConfig:function(e){return new X(e)}}},W=function(){var e=J().withConfig({baseURL:"http://5bdea7dd7ad6890013e9c2b5.mockapi.io/api/v1"});return{getCompany:function(){return e.request({method:"GET",url:"/companies"})},createCompany:function(t){var n=t.name,a=t.address,r=t.revenue,o=t.phone;return e.request({method:"POST",url:"/companies",data:{name:n,address:a,revenue:r,phone:o}})},destroyCompany:function(t){return e.request({method:"DELETE",url:"/companies/".concat(t)})},getOfficeByCompany:function(t){return e.request({method:"GET",url:"/companies/".concat(t,"/office")})},createOffice:function(t){var n=t.companyId,a=t.name,r=t.location,o=t.startDate;return e.request({method:"POST",url:"/companies/".concat(n,"/office"),data:{companyId:n,name:a,location:r,startDate:o}})},destroyOffice:function(t,n){return e.request({method:"DELETE",url:"companies/".concat(n,"/office/").concat(t)})}}},$=function(e){return{type:k,payload:{companies:e}}},z=function(e){return{type:j,error:e}},H=function(){return function(e,t){return W().getCompany().then(function(t){if(200===t.status)return e($(t.data))}).catch(function(){return e(z({error:"Oops! Something went wrong and we couldn't get list of companies"}))})}},K=function(e){return{type:g,name:e.name,address:e.address,revenue:e.revenue,phone:e.phone}},Z=function(e){return{type:N,payload:"succes create company"}},ee=function(e){return{type:S,error:e}},te=function(e){return e.phone=ce(e.phone),function(t,n){return t(K(e)),W().createCompany(e).then(function(e){if(201===e.status)return t(Z(e.data))}).catch(function(){return t(ee({error:"Oops! Something went wrong and we couldn't create company"}))})}},ne=function(e){return{type:I,id:e}},ae=function(e){return{type:"REMOVE_COMPANY_FAILURE",error:e}},re=function(e){return{type:w,id:e}},oe=function(e){return function(t,n){return t(re(e)),W().destroyCompany(e).then(function(e){if(200===e.status)return t(ne(e.data.id))}).catch(function(){return t(ae({error:"Oops! Something went wrong and we couldn't remove company"}))})}},ce=function(e){return"(".concat(e.code,") ").concat(e.number)},ie=function(e){return{type:F,payload:{offices:e}}},le=function(e){return{type:R,error:e}},ue=function(e){return function(t,n){return W().getOfficeByCompany(e).then(function(e){if(200===e.status)return t(ie(e.data))}).catch(function(){return t(le({error:"Oops! Something went wrong and we couldn't get list of office"}))})}},se=function(e){return function(t,n){return W().createOffice(e).then(function(e){if(201===e.status)return t(me(e.data.name))}).catch(function(){return t(pe({error:"Oops! Something went wrong and we couldn't get list of office"}))})}},me=function(e){return{type:_,payload:"success add new office: ".concat(e)}},pe=function(e){return{type:P,error:e}},fe=function(e){return{type:T,payload:"success remove office: ".concat(e)}},de=function(e){return{type:"REMOVE_OFFICE_FAILURE",error:e}},he=function(e){return{type:A,id:e}},ye=function(e,t){return function(n,a){return n(he(e)),W().destroyOffice(e,t).then(function(e){if(200===e.status)return n(fe(e.data.name))}).catch(function(){return n(de({error:"Oops! Something went wrong and we couldn't remove company"}))})}},ve=function(e){function t(e){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"wrapper-forms",style:{height:this.props.height}},this.props.children)}}]),t}(c.a.Component),Ee=(n(43),function(e){var t=e.children;return c.a.createElement("div",{className:"wrapper-cards"},t)}),be=(n(121),function(e){var t=e.children,n=e.removeItem,a=e.name,r=(e.address,e.revenue,e.phone,e.id);return c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header"},c.a.createElement("div",{className:"card-title"},c.a.createElement("div",null,a),c.a.createElement("button",{className:"btn-close",onClick:function(e){return function(e,t){e.preventDefault(),n(t)}(e,r)}},"X"))),t)}),Ce=n(33),Oe=n(86),ge=n(2),Se=n.n(ge),Ne=(n(165),n(78),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={phone:{number:"",code:""},startDate:Se()(),location:{lat:"",long:""}},n.handleDateChange=n.handleDateChange.bind(Object(Ce.a)(Object(Ce.a)(n))),n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"onTextChanged",value:function(e,t){var n=e.target.value;this.props.callbackParent(n)}},{key:"handleInput",value:function(e,t){var n=e.target.value;"code"===t?this.setState({phone:{code:n,number:this.state.phone.number}},function(){this.formatPhoneNumber()}):"number"===t?this.setState({phone:{code:this.state.phone.code,number:n}},function(){this.formatPhoneNumber()}):"latitude"===t?this.setState({location:{lat:n,long:this.state.location.long}},function(){this.formatLoc()}):"longitude"===t&&this.setState({location:{lat:this.state.location.lat,long:n}},function(){this.formatLoc()})}},{key:"handleDateChange",value:function(e){this.setState({startDate:e},function(){this.props.callbackParent(this.state.startDate)})}},{key:"formatPhoneNumber",value:function(){this.props.callbackParent(this.state.phone)}},{key:"formatLoc",value:function(){this.props.callbackParent(this.state.location)}},{key:"doubleInput",value:function(){var e=this;return c.a.createElement("div",{className:"wrapper-input"},c.a.createElement("label",null,this.props.label," ",c.a.createElement("span",{style:{color:"red"}},this.props.errors&&this.props.errors[this.props.placeholder1])),c.a.createElement("br",null),c.a.createElement("span",null,c.a.createElement("input",{style:{width:"70px",marginRight:"10px"},type:"number",placeholder:this.props.placeholder,onChange:function(t){return e.handleInput(t,e.props.placeholder)}}),c.a.createElement("input",{type:"number",style:{width:"180px"},placeholder:this.props.placeholder1,onChange:function(t){return e.handleInput(t,e.props.placeholder1)}})))}},{key:"regulerInput",value:function(){var e=this;return c.a.createElement("div",{className:"wrapper-input"},c.a.createElement("label",null,this.props.label," ",c.a.createElement("span",{style:{color:"red"}},this.props.errors&&this.props.errors[this.props.placeholder])),c.a.createElement("br",null),c.a.createElement("input",{id:this.props.id,type:"text",name:this.props.name,value:this.props.name,placeholder:this.props.placeholder,onChange:function(t){return e.onTextChanged(t)}}))}},{key:"datePicker",value:function(){return c.a.createElement("div",{className:"wrapper-input"},c.a.createElement("label",null,this.props.label),c.a.createElement(Oe.a,{selected:this.state.startDate,onChange:this.handleDateChange}))}},{key:"render",value:function(){return this.props.doubleInput?this.doubleInput():this.props.datePicker?this.datePicker():this.regulerInput()}}]),t}(c.a.Component)),ke=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"handleSelection",value:function(e){var t=e.target.value;this.props.callbackParent(t)}},{key:"render",value:function(){var e=this;return c.a.createElement("label",{className:"menu"},this.props.label,c.a.createElement("br",null),c.a.createElement("select",{className:"menu",onChange:function(t){return e.handleSelection(t)}},this.props.listCompany.length>0&&this.props.listCompany.map(function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.name)})))}}]),t}(c.a.Component),je=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={name:"",address:"",revenue:"",phone:{},errors:{name:"",address:"",revenue:"",number:""}},n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"onChildChanged",value:function(e,t){"name"===e&&this.setState({name:t}),"address"===e&&this.setState({address:t}),"revenue"===e&&this.setState({revenue:t}),"phone"===e&&this.setState({phone:t})}},{key:"handleOnSubmit",value:function(e){e.preventDefault(),this.validatingForm()&&(this.props.handleOnSubmitCompany(this.state),this.removeFieldInput())}},{key:"validatingForm",value:function(){var e=this,t=this.state,n=!0,a={};return t.name||(n=!1,a.name="Cannot be empty"),t.phone.number||(n=!1,a.number="Cannot be empty"),t.phone.code||(n=!1,a.number="Cannot be empty"),t.revenue||(n=!1,a.revenue="Cannot be empty"),t.address||(n=!1,a.address="Cannot be empty"),this.setState({errors:a}),setTimeout(function(){e.setState({errors:{}})},2e3),n}},{key:"removeFieldInput",value:function(){this.companyFormRef.reset(),this.setState({name:"",address:"",revenue:"",phone:{}})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement("div",{className:"title"},c.a.createElement("h1",null,"Create Company")),c.a.createElement("form",{onSubmit:function(t){return e.handleOnSubmit(t)},ref:function(t){return e.companyFormRef=t}},c.a.createElement(Ne,{label:"Name:",id:"mainInput",regularInput:!0,placeholder:"name",errors:{name:this.state.errors.name},initialValue:this.state.name,callbackParent:function(t){return e.onChildChanged("name",t)}}),c.a.createElement(Ne,{label:"Address:",regularInput:!0,placeholder:"address",errors:{address:this.state.errors.address},initialValue:this.state.address,callbackParent:function(t){return e.onChildChanged("address",t)}}),c.a.createElement(Ne,{label:"Revenue:",regularInput:!0,placeholder:"revenue",errors:{revenue:this.state.errors.revenue},initialValue:this.state.revenue,callbackParent:function(t){return e.onChildChanged("revenue",t)}}),c.a.createElement(Ne,{label:"Phone No:",doubleInput:!0,placeholder:"code",placeholder1:"number",errors:{number:this.state.errors.number},initialValue:this.state.phone,callbackParent:function(t){return e.onChildChanged("phone",t)}}),c.a.createElement("p",{style:{color:"red",display:this.message?"black":"none"}},"Please fill in all fields"),c.a.createElement("input",{className:"btn-submit",type:"submit",value:"Create"})))}}]),t}(c.a.Component),we=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).state={name:"",location:{},companyId:1,startDate:Se()(),errors:{}},e}return Object(f.a)(t,e),Object(s.a)(t,[{key:"onChildChanged",value:function(e,t){"name"===e&&this.setState({name:t}),"location"===e&&this.setState({location:t}),"companyId"===e&&this.setState({companyId:t}),"date"===e&&this.setState({startDate:t})}},{key:"handleOnSubmit",value:function(e){e.preventDefault(),this.validatingForm()&&(this.props.handleOnSubmitOffice(this.state),this.removeFieldInput())}},{key:"removeFieldInput",value:function(){this.officeFormRef.reset(),this.setState({name:"",location:{}})}},{key:"validatingForm",value:function(){var e=this,t=this.state,n=!0,a={};return t.name||(n=!1,a.name="Cannot be empty"),t.location.lat||(n=!1,a.location="Cannot be empty"),t.location.long||(n=!1,a.location="Cannot be empty"),this.setState({errors:a}),setTimeout(function(){e.setState({errors:{}})},2e3),n}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement("div",{className:"title"},c.a.createElement("h1",null,"Create Office")),c.a.createElement("form",{onSubmit:function(t){return e.handleOnSubmit(t)},ref:function(t){return e.officeFormRef=t}},c.a.createElement(Ne,{label:"Name:",placeholder:"name",regularInput:!0,errors:{name:this.state.errors.name},initialValue:this.state.name,callbackParent:function(t){return e.onChildChanged("name",t)}}),c.a.createElement(Ne,{label:"Location:",doubleInput:!0,placeholder:"latitude",placeholder1:"longitude",initialValue:"",errors:{longitude:this.state.errors.location},callbackParent:function(t){return e.onChildChanged("location",t)}}),c.a.createElement(Ne,{label:"Office Start Date:",datePicker:!0,callbackParent:function(t){return e.onChildChanged("date",t)}}),c.a.createElement(ke,{label:"Company:",listCompany:this.props.companies,callbackParent:function(t){return e.onChildChanged("companyId",t)}}),c.a.createElement("input",{className:"btn-submit",type:"submit",value:"Create"})))}}]),t}(c.a.Component),Ie=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.actionsCompany.getCompany()}},{key:"handleSubmitCompany",value:function(e){this.props.actionsCompany.createCompany(e)}},{key:"handleSubmitOffice",value:function(e){this.props.actionsOffice.createOffice(e)}},{key:"handleRemoveCompany",value:function(e){window.confirm("Are You sure to remove it?")&&this.props.actionsCompany.removeCompany(e)}},{key:"cardContent",value:function(e){return c.a.createElement("div",{className:"card-content"},c.a.createElement("div",null,c.a.createElement("p",{className:"title-ligth-grey"},"Address:"),c.a.createElement("p",{className:"regular"},e.address)),c.a.createElement("div",null,c.a.createElement("p",{className:"title-ligth-grey"},"Revenue:"),c.a.createElement("p",{className:"regular"},e.revenue)),c.a.createElement("div",null,c.a.createElement("p",{className:"title-ligth-grey"},"Phone:"),c.a.createElement("p",{className:"regular"},e.phone)))}},{key:"noCompany",value:function(){return c.a.createElement("p",null,"Ooopss!!! There's no Company created yet ")}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(ve,{height:"350px"},c.a.createElement("div",{className:"flex-around"},c.a.createElement("div",{className:"box"},c.a.createElement(je,{handleOnSubmitCompany:function(t){return e.handleSubmitCompany(t)}})),c.a.createElement("hr",null),c.a.createElement("div",{className:"box"},c.a.createElement(we,{companies:this.props.company,handleOnSubmitOffice:function(t){return e.handleSubmitOffice(t)}})))),c.a.createElement(Ee,null,c.a.createElement("div",null,c.a.createElement("h1",null,"Companies")),c.a.createElement("div",{className:"grid"},this.props.company.length>0?this.props.company.map(function(t,n){return c.a.createElement(B.a,{to:"/company/".concat(t.id,"/office/"),key:t.id},c.a.createElement(be,{key:t.id,id:t.id,name:t.name,removeItem:function(t){return e.handleRemoveCompany(t)}},e.cardContent(t)))}):this.noCompany())))}}]),t}(c.a.Component),_e=Ie=Object(d.b)(function(e){return{company:e.company.companies,office:e.office.offices}},function(e){return{actionsCompany:Object(E.b)(a,e),actionsOffice:Object(E.b)(r,e)}})(Ie),Pe=function(e){return e.children},Fe=function(e){return c.a.createElement(Pe,null,c.a.createElement(_e,e))},Re=(n(168),function(e){var t=e.company;if(t){var n=t.name,a=t.address,r=t.revenue,o=t.phone;return c.a.createElement("div",{className:"office"},c.a.createElement("div",{className:"office-header"},c.a.createElement("div",{className:"office-title"},n)),c.a.createElement("div",{className:"office-content"},c.a.createElement("div",{className:"office-detail"},c.a.createElement("p",{className:"title-ligth-grey"},"Address:"),c.a.createElement("p",{className:"regular"},a)),c.a.createElement("div",null,c.a.createElement("p",{className:"title-ligth-grey"},"Revenue:"),c.a.createElement("p",{className:"regular"},r)),c.a.createElement("div",null,c.a.createElement("p",{className:"title-ligth-grey"},"Phone:"),c.a.createElement("p",{className:"regular"},o)),c.a.createElement("div",null,c.a.createElement(B.a,{className:"btn-navigate",to:"/"},"Back to Overview"))))}return c.a.createElement("div",{className:"center"},"Loading...")}),Ae=(n(170),function(e){var t=e.offices,n=e.callbackParent;return t.length>0?c.a.createElement("div",{className:"wrapper-cards grid"},t.map(function(e,t){return c.a.createElement(be,{key:t,id:e.id,name:e.name,removeItem:function(e){return function(e){window.confirm("Are You sure to remove it?")&&n(e)}(e)}},function(e){return c.a.createElement("div",{className:"card-content"},c.a.createElement("div",null,c.a.createElement("p",{className:"title-ligth-grey"},"Location:"),c.a.createElement("p",{className:"regular"},"Lat - ",e.location.lat),c.a.createElement("p",{className:"regular"},"Long - ",e.location.long)),c.a.createElement("div",null,c.a.createElement("p",{className:"title-ligth-grey"},"Office Start Date:"),c.a.createElement("p",{className:"regular"},Se()(e.startDate).format("L"))))}(e))})):c.a.createElement("div",{className:"center"},"There's no office created yet!!!")}),Te=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={companyId:""},n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.setState({companyId:e}),this.getCompany(e),this.props.actionsOffice.getOfficeByCompany(e)}},{key:"handleRemoveOffice",value:function(e){this.props.actionsOffice.removeOffice(e,this.state.companyId)}},{key:"getCompany",value:function(e){this.props.actionsCompany.getCompany(e)}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(ve,{height:"270px"},c.a.createElement(Re,{company:this.props.company[0]})),c.a.createElement(Ee,null,c.a.createElement(Ae,{offices:this.props.office,callbackParent:function(t){return e.handleRemoveOffice(t)}})))}}]),t}(c.a.Component),De=Te=Object(d.b)(function(e){return{office:e.office.offices,company:e.company.companies}},function(e){return{actionsOffice:Object(E.b)(r,e),actionsCompany:Object(E.b)(a,e)}})(Te),Le=function(e){return c.a.createElement(Pe,null,c.a.createElement(De,e))},Me=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement(d.a,{store:q},c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"wrapper app"},c.a.createElement(y.a,null,c.a.createElement(h.a,null,c.a.createElement(v.a,{exact:!0,path:"/",component:Fe}),c.a.createElement(v.a,{path:"/company/:id/office",component:Le}))))))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(Me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},43:function(e,t,n){},88:function(e,t,n){e.exports=n(173)},93:function(e,t,n){},99:function(e,t,n){}},[[88,2,1]]]);
//# sourceMappingURL=main.f4aea69a.chunk.js.map